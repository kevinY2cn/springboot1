<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dk.mapper.RoleMapper">


	<select id="getRowCount" resultType="int">
		select count(*) from role
	</select>
	<select id="queryAll" resultMap="roleResult">
		select * from role limit #{offset}, #{limit}
	</select>
	
	<insert id="addRole" parameterType="role" useGeneratedKeys="true" keyProperty="id">
		insert into role(role_name) values
			<foreach collection="list" item="item" separator=",">
			(
			#{item.roleName}
			)
			</foreach>
	</insert>
	
	<delete id="deleteRole" parameterType="int">
		delete from role where id in
		<trim prefix="(" suffix=")">
			<foreach collection="list" item="item" separator=",">
			#{item}
			</foreach>
		</trim>
	</delete>
	
	<update id="updateRole" parameterType="role">
		<foreach collection="list" item="item">
			update role 
			<set>
				<if test="item.roleName != null">
					role_name = #{item.roleName}
				</if>
			</set>
			<where>
				1=1 and id = #{item.id};
			</where>
		</foreach>
	</update>


	<resultMap id="roleResult" type="role">
		<id property="id" column="id"></id>
		<result property="roleName" column="role_name"/>
		<result property="createDate" column="create_date"/>
	</resultMap>
</mapper>